# Database Tables Report
**Supabase Project:** permit-place-dashboard-v2
**Project ID:** hgbfbvtujatvwpjgibng  
**Generated:** 2025-09-01  
**Environment:** Production

## Executive Summary

This report provides a comprehensive overview of all tables in the Supabase database for the **permit-place-dashboard-v2** project. The analysis was conducted using the anonymous API key, which provides limited access due to Row Level Security (RLS) policies.

## 🚀 Project Information

- **Project Name:** permit-place-dashboard-v2
- **Project ID:** hgbfbvtujatvwpjgibng
- **Organization ID:** wvkxkdydapcjjdbsqkiu
- **Region:** us-west-1
- **Status:** ACTIVE_HEALTHY
- **Created:** April 22, 2025
- **Database URL:** https://nfelusqpbgunmglfnycm.supabase.co

## 📋 Accessible Tables

### 1. **posts** (Public Schema)
- **Status:** ✅ Accessible with anonymous key
- **Schema:** public
- **Purpose:** Blog/content management system

#### Fields (inferred from application models):
- `id` - Primary key (UUID, auto-generated)
- `title` - Post title (TEXT)
- `content` - Post content (TEXT)
- `author_id` - Foreign key to auth.users (UUID)
- `created_at` - Timestamp (TIMESTAMPTZ, auto-generated)
- `updated_at` - Timestamp (TIMESTAMPTZ, auto-updated)

#### Available Operations:
- ✅ CREATE - Insert new posts
- ✅ READ - Select posts (all and by ID)
- ✅ UPDATE - Modify existing posts
- ✅ DELETE - Remove posts
- ✅ Filter by author_id

## 🔐 System Tables (Limited Access)

### 2. **users** (Auth Schema)
- **Status:** 🔒 Limited access (auth.users system table)
- **Schema:** auth
- **Purpose:** User authentication and profile management
- **Access:** Via Supabase Auth API only

#### Operations:
- ✅ User registration (auth.signUp)
- ✅ User authentication (auth.signInWithPassword)
- ✅ Profile queries by ID (limited to authenticated users)

## 🏗️ Supabase System Schemas

The following schemas exist but have restricted access with anonymous keys:

### 3. **auth** Schema
- Contains user authentication tables
- Manages user sessions, roles, and permissions
- Access controlled by Supabase Auth system

### 4. **storage** Schema  
- File storage system tables
- Manages uploaded files and buckets
- Access controlled by storage policies

### 5. **extensions** Schema
- Database extensions and plugins
- System-level functionality

### 6. **realtime** Schema
- Real-time subscription system
- WebSocket connection management

## 🛡️ Security Analysis

### Row Level Security (RLS) Status:
- **posts table:** RLS policies active (anonymous access allowed for read operations)
- **auth tables:** Protected by Supabase Auth system
- **System tables:** Restricted access for security

### Access Limitations:
- Information schema queries blocked with anonymous key
- Direct SQL execution restricted
- System catalog access denied

## 📊 Table Statistics

| Table | Schema | Accessible | Operations | Security |
|-------|--------|------------|------------|----------|
| posts | public | ✅ | CRUD | RLS Active |
| users | auth | 🔒 | Auth API Only | System Protected |
| *_system | various | ❌ | None | System Protected |

## 🔍 Discovery Methods Used

1. **Direct table listing script** - `list-tables.js`
2. **Application model analysis** - Examined `src/models/`
3. **Common table name probing** - Tested standard table names
4. **Code analysis** - Reviewed controllers and routes

## ⚠️ Limitations

This analysis was conducted using the anonymous API key, which means:
- Some tables may exist but are not visible due to RLS policies
- System tables cannot be directly queried
- Complete schema information requires service role access
- Table counts and detailed statistics are not available

## 🔧 Recommendations

1. **Service Role Access:** Use service role key for complete table enumeration
2. **Database Direct Access:** Connect with postgres credentials for full schema access
3. **Supabase Dashboard:** Use the web interface for comprehensive table management
4. **Custom RPC Function:** Create a database function to list tables securely

## 📝 SQL Schema References

Based on application models, the core table structure appears to be:

```sql
-- Posts table (inferred structure)
CREATE TABLE public.posts (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    title TEXT NOT NULL,
    content TEXT,
    author_id UUID REFERENCES auth.users(id),
    created_at TIMESTAMPTZ DEFAULT NOW(),
    updated_at TIMESTAMPTZ DEFAULT NOW()
);

-- Enable RLS
ALTER TABLE public.posts ENABLE ROW LEVEL SECURITY;
```

## 🎯 Next Steps

To get a complete table listing:
1. Upgrade to service role key access
2. Create a custom database function for table enumeration
3. Use Supabase CLI with proper authentication
4. Connect directly via postgres connection string

---
**Report Generated By:** Supabase Admin Agent  
**Tool:** Claude Flow v2.0.0-alpha.86  
**Method:** Anonymous key analysis + Model inference